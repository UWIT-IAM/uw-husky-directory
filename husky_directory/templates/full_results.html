{# scenario: models.search.DirectoryQueryScenarioOutput #}
{% for scenario in search_result["scenarios"]%}
    {% if scenario['num_results'] > 0 %}
        <p>
        <h4>{{scenario['description']}}</h4>
        {# population: models.search.DirectoryQueryPopulationOutput #}
        {% for population, results in scenario['populations'].items() %}
            {% for data in results['people'] %}
                <h3>{{ data['name'] }}</h3>
                <ul class="dir-listing">
                    <li>{{ data['email'] }}</li>
                    {% for contact_method, numbers in
                       data['phone_contacts'].items() %}
                        {% if numbers|length %}
                            <li>{{ contact_method|singularize|titleize }}:
                                {{ numbers|join(', ') }}</li>
                        {% endif %}
                    {% endfor %}
                </ul>
                <button class="btn btn-primary" name="vcard-{{ loop.index }}">
                    <a href="/search/person/{{ data['href'] }}/vcard"
                       style="color:white;"
                       download="{{ data['name'] }}.vcf">Download vcard</a>
                </button>
            {% endfor %}
        {% endfor %}
        </p>
    {% endif %}
{% endfor %}
